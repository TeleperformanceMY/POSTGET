<!DOCTYPE html>
<html>
<head>
  <title>Check Application Status</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .entry { border: 1px solid #ccc; padding: 10px; margin: 10px 0; border-radius: 5px; }
  </style>
</head>
<body>
  <h2>Check Your Application</h2>

  <input type="email" id="email" placeholder="Enter your email"><br>
  <input type="text" id="phone" placeholder="Enter your phone"><br>
  <button onclick="checkStatus()">Check Status</button>

  <div id="result"></div>

  <script>
    async function checkStatus() {
      const email = document.getElementById('email').value;
      const phone = document.getElementById('phone').value;

      const response = await fetch("https://prod-77.southeastasia.logic.azure.com:443/workflows/3dcf20be6af641a4b49eb48727473a47/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=uVigg-lTLRaUgLgUdGUnqCt9-TWJC7E7c8ryTjLC0Hw", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, phone })
      });

      const data = await response.json();
      console.log("Returned data:", data);

      // If the response is an array, display it directly
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = ""; // Clear previous

      if (Array.isArray(data)) {
        data.forEach(entry => {
          const div = document.createElement("div");
          div.className = "entry";
          div.innerHTML = `
            <p><strong>Name:</strong> ${entry.name ?? 'N/A'}</p>
            <p><strong>Phone:</strong> ${entry.phone ?? 'N/A'}</p>
            <p><strong>Email:</strong> ${entry.email ?? 'N/A'}</p>
            <p><strong>Status:</strong> ${entry.status ?? 'N/A'}</p>
            <p><strong>Referral:</strong> ${entry.referral ?? 'N/A'}</p>
          `;
          resultDiv.appendChild(div);
        });
      } else {
        resultDiv.innerHTML = "<p>No valid data returned (not an array).</p>";
      }
    }
  </script>
</body>
</html>
